{% extends 'frontend/base.html' %}
{% block content %}

<h1>Registration Page</h1>

<input type="text" name="fname" required id="fname" placeholder="name">
<input type="email" name="email" id="email" placeholder="email" required>
<input type="password" name="password" id="password" required placeholder="password">
<button type="button" id="register-button">Register</button>
<p>
    <a href="{% url 'landing' %}">Home</a>
</p>

<script>
    
    function register() {
        email = document.getElementById('email').value
        password = document.getElementById('password').value
        fname = document.getElementById('fname').value

        data = {
            "name": fname,
            "email": email,
            "password": password
        }

        fetch("{% url 'api-register' %}", {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        })
        .then(res => {
            if (res.status == 200) {
                console.log("user created!");
                window.location = "{% url 'login' %}";
            }
        });
    }

    document.getElementById('register-button').addEventListener('click', register);
    

</script>

{% endblock %}